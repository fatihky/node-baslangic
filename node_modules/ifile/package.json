{
  "author": {
    "name": "doublespout",
    "email": "snoopyxdy@163.com",
    "url": "http://snoopyxdy.blog.163.com"
  },
  "name": "ifile",
  "description": "High performance nodejs http/https static file handler,using c++ addon and libuv lib",
  "keywords": [
    "node",
    "static",
    "file",
    "nodejs",
    "libuv",
    "c++",
    "example"
  ],
  "version": "0.3.5",
  "url": "https://github.com/DoubleSpout/ifile",
  "homepage": "https://github.com/DoubleSpout/ifile",
  "repository": {
    "type": "git",
    "url": "https://github.com/DoubleSpout/ifile.git"
  },
  "main": "index.js",
  "engines": {
    "node": ">=0.10.0"
  },
  "dependencies": {
    "mime": "1.2.6"
  },
  "scripts": {
    "install": "node-gyp rebuild",
    "tset": "node ./test/main.js"
  },
  "readme": "# ifile(fast and simple nodejs http/https static file module)[![Build Status](https://travis-ci.org/DoubleSpout/ifile.png?branch=master)](https://travis-ci.org/DoubleSpout/ifile)\r\n\r\nifile is a simple static http/https handler module, build with libuv and c++.\r\n\r\nthe module are also be used in express and flat.js framework.\r\n\r\n## Installing the module\r\n\r\nWith [npm](http://npmjs.org/):\r\n\r\nifile module is supported windows, linux, mac.\r\n\r\nMake sure, node-gyp has installed.\r\n\r\n     npm install ifile\r\n\r\nFrom source:\r\n\r\n     git clone https://github.com/DoubleSpout/ifile.git\r\n     cd ifile\r\n     node-gyp rebuild\r\n\r\nTo include the module in your project:\r\n\r\n     var ifile = require('ifile');\r\n\r\n##benchmark\r\nsend the same js file, 6KB size.\r\n\r\n      nginx \r\n      ab -c 100 -n 20000 http://192.168.28.5:8124/js/test.js\r\n      Requests per second:    2634.31 [#/sec] (mean)\r\n\r\n      ab -c 500 -n 20000 http://192.168.28.5:8124/js/test.js\r\n      Requests per second:    1886.92 [#/sec] (mean)\r\n\r\n      ab -c 800 -n 20000 http://192.168.28.5:8124/js/test.js\r\n      Requests per second:    2033.45 [#/sec] (mean)\r\n\r\n      ab -c 500 -n 20000 -H \"Accept-Encoding: gzip\" http://192.168.28.5:8124/js/test.js\r\n      Requests per second:    2029.59 [#/sec] (mean)\r\n\r\n\r\n      ifile\r\n      ab -c 100 -n 20000 http://192.168.28.5:8125/js/test.js\r\n      Requests per second:    2077.29 [#/sec] (mean)\r\n\r\n      ab -c 500 -n 20000 http://192.168.28.5:8125/js/test.js\r\n      Requests per second:    1880.00 [#/sec] (mean)\r\n\r\n      ab -c 800 -n 20000 http://192.168.28.5:8125/js/test.js\r\n      Requests per second:    1791.16 [#/sec] (mean)\r\n\r\n      ab -c 500 -n 20000 -H \"Accept-Encoding: gzip\" http://192.168.28.5:8125/js/test.js\r\n      Requests per second:    1858.01 [#/sec] (mean)\r\n\r\n\r\n      express\r\n      ab -c 100 -n 20000 http://192.168.28.5:8126/js/test.js\r\n      Requests per second:    915.21 [#/sec] (mean)\r\n\r\n      ab -c 500 -n 20000 http://192.168.28.5:8126/js/test.js\r\n      Requests per second:    858.89 [#/sec] (mean)\r\n\r\n      ab -c 800 -n 20000 http://192.168.28.5:8126/js/test.js\r\n      Requests per second:    668.99 [#/sec] (mean)\r\n\r\n      ab -c 500 -n 20000 -H \"Accept-Encoding: gzip\" http://192.168.28.5:8126/js/test.js\r\n      Requests per second:    677.11 [#/sec] (mean)\r\n\r\n\r\n\r\n      express+ifile\r\n      ab -c 100 -n 20000 http://192.168.28.5:8127/js/test.js\r\n      Requests per second:    1684.85 [#/sec] (mean)\r\n\r\n      ab -c 500 -n 20000 http://192.168.28.5:8127/js/test.js\r\n      Requests per second:    1717.32 [#/sec] (mean)\r\n\r\n      ab -c 800 -n 20000 http://192.168.28.5:8127/js/test.js\r\n      Requests per second:    1399.09 [#/sec] (mean)\r\n\r\n      ab -c 500 -n 20000 -H \"Accept-Encoding: gzip\" http://192.168.28.5:8127/js/test.js\r\n      Requests per second:    1468.06 [#/sec] (mean)\r\n\r\n\r\n## example\r\n\r\n    var ifile = require('ifile')\r\n\r\n    var http = require('http')\r\n\r\n    ifile.add([\r\n\r\n     [\"/static\",__dirname,['js','css','jpg']],\r\n\r\n    ],function(req,res,is_static){\r\n\r\n    \tres.statusCode = 404;\r\n\r\n        res.end('404')\r\n\r\n    })\r\n\r\n    var http = require('http');\r\n\r\n    http.createServer(function (req, res) {\r\n\r\n      ifile.route(req,res);\r\n\r\n    }).listen(8124);\r\n\r\nthen request the 127.0.0.1:8124/static/xxx.js\r\n\r\nif you have a file in __dirname/static/xxx.js then you will see it.\r\n\r\n##API\r\n\r\nifile.add(routearray,not_match_callback);\r\n\r\nifile.route(req,res); \r\nroute the request\r\n\r\nroutearray:\r\n\r\n  [\r\n    [request_url_prefix, static_folder [,support_extensions_array]],\r\n    ...\r\n  ]\r\n\r\n  example:\r\n\r\n      [\r\n      \t[\"/static\",__dirname,['js','css','jpg']],\r\n      \t[\"/static2\",__dirname],\r\n      \t[\"/skin\",\"static\",['js','css','jpg']]   //static folder will be __dirname+'/'+static\r\n      ]\r\n\r\nnot_match_function:\r\nif ifile not match the request,the not_match_function will be called.It has three parameters,req, res and is_static.\r\nfor example if add [\"/static2\",__dirname]\r\n1,request \"/user/aaa\" will call the not_match_function,and is_static param will be 0;\r\n2,request \"/static/not_exist_file\" will call the not_match_function,and is_static param will be 1;\r\n\r\n##options\r\nset ifile.options property to change the default options,for example:\r\n      \r\n      var ifile = require('ifile');\r\n      ifile.options = {\r\n        expired:86400*100*30,\r\n        gzip:false\r\n      }\r\n\r\ndefault options is that:\r\n\r\n      default_options = {\r\n        pipe_szie : 1024*1024*20, //超过20MB的静态文件使用pipe传输不读入内存\r\n        expired : 86400*1000,     //cache-control : max-age=86400\r\n        gzip : true,              //是否开启gzip\r\n        gzip_min_size : 1024,       //开启gzip的文件必须大于等于1024byte\r\n        gzip_file : ['js','css','less','html','xhtml','htm','xml','json','txt'], //gzip压缩的文件后缀名\r\n        gzip_level : 9, //-1表示使用默认值\r\n      }\r\n\r\nmore example see /test/main.js\r\n\r\n##expressjs example\r\n\r\n      var express = require('express');\r\n      var app = express();\r\n      var ifile = require(\"ifile\");\r\n      app.use(ifile.connect()); \r\n      //default is [['/static',__dirname]];\r\n\r\n      app.listen(3000);\r\n\r\n",
  "readmeFilename": "readme.md",
  "gypfile": true,
  "bugs": {
    "url": "https://github.com/DoubleSpout/ifile/issues"
  },
  "_id": "ifile@0.3.5",
  "dist": {
    "shasum": "2f4f3587e760139d0490d81019c0ebe9ab43d049"
  },
  "_from": "ifile@",
  "_resolved": "https://registry.npmjs.org/ifile/-/ifile-0.3.5.tgz"
}
